# Phase 0: 理解快照（Understanding Snapshot）

任务启动前的必经阶段。目的是生成 anchor.md — 整个任务的防幻觉锚点。

## 核心流程

```text
1. 禁止立即创建文档或代码
2. Agent 输出理解快照（意图 + 歧义点 + 假设）
3. 用户确认或修正
4. 写入 anchor.md
```

## 理解快照格式

Agent 向用户输出以下内容：

```
我的理解：
- 意图：[一句话描述核心目标]
- 歧义点：[识别到的不明确之处]
- 我的假设：[Agent 对歧义点的默认假设]

需要确认：以上理解正确吗？有需要修正的地方吗？
```

## 问题框架（参考）

以下问题框架供 Agent 在需要时**选用**，不要求全部使用：

### 边界
- 这个任务包含哪些功能？
- 明确不需要做的是什么？
- 与现有系统如何集成？

### 约束
- 有技术限制吗？（框架、语言、依赖）
- 有时间限制吗？
- 有哪些不可变的现有代码？

### 优先级
- 哪个功能最重要？
- 如果时间不够，可以先放弃什么？

### 风险
- 有什么可能出问题？
- 需要备选方案吗？

## 写入 anchor.md

用户确认后，将理解快照写入 `anchor.md`：

| 字段 | 来源 |
|------|------|
| Intent | 用户确认的意图 |
| Constraints | 对话中识别的约束 |
| Scope | 确认的包含/排除范围 |
| Done-when | 用户认可的完成标准 |
| Resolved Ambiguities | 歧义点及其决议 |

完成后进入执行阶段。
